<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ÊäñÈü≥Áõ¥Êí≠ÂàóË°®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <link rel="apple-touch-icon" href="https://raw.githubusercontent.com/fishdown/Icon/master/app/dy180.png" />
  <link rel="icon" href="https://raw.githubusercontent.com/fishdown/Icon/master/app/dy180.png" type="image/png" />

  <style>
    :root {
      --bg-color: #f5f5f5;
      --card-color: white;
      --text-color: #333;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #121212;
        --card-color: #1e1e1e;
        --text-color: #f0f0f0;
      }
    }

    body {
      font-family: "Arial", sans-serif;
      background-color: var(--bg-color);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 20px;
      padding: 20px;
      transition: background-color 0.3s ease;
    }

    .card {
      background-color: var(--card-color);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
      text-align: center;
      transition: transform 0.2s ease;
      color: var(--text-color);
      display: flex;
      flex-direction: column;
    }

    .card:hover {
      transform: scale(1.05);
    }

    .card img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }

    .name {
      padding: 10px;
      font-size: 16px;
      font-weight: bold;
      word-break: break-word;
      flex-grow: 1;
    }

    #searchBtn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background-color: #007aff;
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      cursor: pointer;
      z-index: 999;
    }

    #searchInput {
      position: fixed;
      bottom: 80px;
      left: 20px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      display: none;
      font-size: 16px;
      background: var(--card-color);
      color: var(--text-color);
      width: 180px;
    }
  </style>
</head>
<body>

<input type="text" id="searchInput" placeholder="ÊêúÁ¥¢‰∏ªÊí≠Âêç..." />
<button id="searchBtn">üîç</button>

<script>
  const jsonUrl = "https://raw.githubusercontent.com/fishdown/Ggsddu/master/Json/M3U8/douyin.json";
  let originalList = [];

  function renderCards(list) {
    document.querySelectorAll(".card").forEach(c => c.remove());
    list.forEach(item => {
      const card = document.createElement("div");
      card.className = "card";

      const link = document.createElement("a");
      link.href = item.mediaUrl;
      link.target = "_blank";

      const img = document.createElement("img");
      img.src = item.imgUrl || "";
      link.appendChild(img);

      const name = document.createElement("div");
      name.className = "name";
      name.textContent = item.name || "Êú™Áü•‰∏ªÊí≠";

      card.appendChild(link);
      card.appendChild(name);
      document.body.appendChild(card);
    });
  }

  fetch(jsonUrl)
    .then(response => response.json())
    .then(data => {
      originalList = Array.isArray(data) ? data : (data.data || []);
      renderCards(originalList);
    })
    .catch(err => {
      console.error("‚ùå Âä†ËΩΩ JSON Êï∞ÊçÆÂ§±Ë¥•:", err);
      const errorText = document.createElement("div");
      errorText.textContent = "Âä†ËΩΩÁõ¥Êí≠ÂàóË°®Â§±Ë¥•ÔºåËØ∑Á®çÂêéÂÜçËØï„ÄÇ";
      errorText.style.color = "red";
      errorText.style.fontSize = "18px";
      document.body.appendChild(errorText);
    });

  const searchBtn = document.getElementById("searchBtn");
  const searchInput = document.getElementById("searchInput");

  searchBtn.addEventListener("click", () => {
    searchInput.style.display = searchInput.style.display === "none" ? "block" : "none";
    searchInput.focus();
  });

  searchInput.addEventListener("input", () => {
    const keyword = searchInput.value.trim().toLowerCase();
    const filtered = originalList.filter(item => item.name?.toLowerCase().includes(keyword));
    renderCards(filtered);
  });
</script>

</body>
</html>
